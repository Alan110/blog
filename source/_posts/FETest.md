---
title: 前端自动化测试
date: 2016-08-25 20:53:15
type: "categories"
categories: "前端自动化测试"
tags:
---

# 什么是自动化测试

顾名思义，自动化测试就是让我们从手工的劳动中解放出来，让机器代我们去做一些事情。人力成本，总是有限的，况且难免出错。

自动化测试也是软件工程化的一部分。

## 什么样的项目适合自动化测试

并不是所有的项目都适合自动化测试，甚至一个项目里面可能只有20%的代码适合自动化测试。
自动化测试不是神，它是有成本的，并不是说你做自动化测试就一定会有收益。

成本:

* 测试环境的搭建和管理
* 测试环境的检查，监控和报警
* 测试代码的编译和测试构建
* 测试代码的静态检查和报警
* 测试用例的分发和执行
* 测试结果的保存与管理
* 测试报告的生成
* 测试优先级的建议


解读：

- 自动化的**收益与项目迭代次数**成正比
- 自动化收益可能为负数：即当**自动化成本**和**维护成本**比手动**执行成本**还高时
- 很多时候自动化成本并不比手动成本高，但是维护成本很高

### 适合的场景

让收益最大化原则，我们设想的合适场景是:

* 以**回归测试**为主的项目。即需要长期做支持维护的产品。(迭代次数高)
* **接口**比较稳定的产品。(维护成本低)
* 手动测试特别费时费力，甚至无法达到测试目的的项目。比如**压力测试**，大数据或者大量重复数据测试，必须有自动化工具的支持。(手工成本高)
* **覆盖性测试**，避免遗漏边界情况(手工成本高)


![Alt Text](http://o99eh3ii0.bkt.clouddn.com/%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7%202017-01-07%20%E4%B8%8B%E5%8D%883.44.52.png ) 


## 前端自动化测试的难点
近几年前端发展迅猛，前端越来越工程化，自动化。自动化测试是工程化中必不可少的一部分。
但是前端代码80%都是与GUI的相关的业务代码。从本质上来说，前端是一种特殊的**GUI软件**。API测试方法论在测试GUI时并不能解决所有问题。GUI测试的成本非常高:

1. 它的输入输出不明确,不好写case

2. 它的迭代速度很快，case的维护成本非常高。

所以针对那相对稳定的20%,我们可以采用API测试，以及模拟测试。而剩下的80%，主要还是靠人力测试。

## 针对80%的测试

针对这部分的自动化测试，更多的是辅助测试。缩小测试范围，最后由人工测试。

#### 1、页面差异监控

基于dom树的diff，原理是利用phantomjs等无头浏览器，访问页面，遍历整个dom树，	构造出一个json结构。每次diff这个json，来对比差异。用于缩小回归范围。

## 针对20%的测试

#### 1、单测


___

#### 2、行为测试



#### 3、集成方案

> [karma](https://www.npmjs.com/package/karma)

前端集成测试框架，本身不提供测试库，支持主流的测试框架。管理依赖，复杂测试。支持生成代码覆盖率报表。

![](http://o99eh3ii0.bkt.clouddn.com/%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7%202016-08-31%20%E4%B8%8B%E5%8D%884.43.54.png)

> 总结：强烈推荐，管理各种依赖，测试框架。专注于测试本身



