---
title: 计算机编码的来龙去脉
date: 2016-10-07 13:27:31
tags:
---


## 计算机编码的基本原理

在计算机内部，所有信息都会被表示成二进制码，即0，1串。人们约定8位二进制为一个byte。byte是计算机的最小存储单元。

a. 1 bit = 2种两种可能性 ,0/1
b. 1 byte = 8 bit
c. 1 byte = 2 ^ 8 次方 = 256 种可能性
d. 1 byte 可以给256个字符编码



## 计算机编码的发展史

> ASCII -> unicode -> utf(8,16) [世界发展]

为了存储以及展现字符，人们就用这8个二进制的编码来标识字符。计算机最开始只支持英文，使用了0-127就可以完整标识英文了，这套编码就叫**ASCII**码。

后来欧洲的国家也使用计算机，某些符号不能表示，于是他们就是用了剩下的128-255码位来标识。

再后来中国也开始使用计算机，中国汉字有10万左右，一个字节已经不够了标识了。于是就是用2个字节来标识。理论上可以表示 256 x 256 = 65536个字，常用汉字也就7000多个。完全可以满足日常使用了。这套编码就是**GB2312**。

计算机开始遍布全球，其他国家也开始了定制自己的字符集。这造成了一个问题，跨文字的沟通变得困难，同一个二进制码在不同字符集中代表不同意义，想要精确知道原文含义，就必须安装相应文字的字符集。否则就会出现乱码。

这时出现了一个组织叫ISO，他们搞出了一套编码叫**Unicode**,致力于统一所有语言的字符编码,**作为不同文字之间的转换桥梁**。

Unicode默认用2个字节来标识一个字符，这样在存储英文的时候，耗费的空间会多一倍。随着互联网的兴起，带宽是很昂贵的，所以后来就出现了UTF类的传输编码，如**utf8**。 它是可以变长编码，能使用1-6个字节来标识字符。目的在于节省传输开销。


> ASCII -> GB2312 -> GBK -> GB18030    [中文发展]

### GB2312

GB2312是中国国家标准**简体中文**字符集
GB 2312标准共收录6763个汉字，其中一级汉字3755个，二级汉字3008个；同时收录了包括拉丁字母、希腊字母、日文平假名及片假名字母、俄语西里尔字母在内的682个字符。
GB2312对任意一个图形字符都采用两个字节表示。 与ASCII有重叠，通行方法是将GB码两个字节的最高位置1以示区别。
GB2312基本满足日常使用，但对汉字的收录还是太少了，对于人名、古汉语等方面出现的罕用字，GB 2312不能处理，这导致了后来GBK及GB 18030汉字字符集的出现。

### GBK

GBK即汉字内码**扩展规范**，K为汉语拼音 Kuo Zhan（扩展）中“扩”字的声母。英文全称Chinese Internal Code Specification。
GBK共收入21886个汉字和图形符号，包括：
GB2312中的全部汉字、非汉字符号。
BIG5中的全部汉字。
与ISO 10646相应的国家标准GB13000中的其它CJK汉字，以上合计20902个汉字。
其它汉字、部首、符号，共计984个。

### GB18030

GB18030是取代GBK1.0的正式国家标准。该标准收录了27484个汉字，同时还收录了藏文、蒙文、维吾尔文等主要的少数民族文字。现在的PC平台必须支持GB18030，对嵌入式产品暂不作要求。所以手机、MP3一般只支持GB2312。

GB18030有两个版本：GB18030-2000和GB18030-2005。GB18030-2000是GBK的取代版本，它的主要特点是在GBK基础上增加了CJK统一汉字扩充A的汉字。GB18030-2005的主要特点是在GB18030-2000基础上增加了CJK统一汉字扩充B的汉字。
GB18030可用于**一切处理中文**（包括汉字和少数民族文）信息，特别是汉字信息的信息处理产品

GB18030像utf8一样是变长编码，1-4个字节。


> 总结

从ASCII、GB2312、GBK到GB18030，这些编码方法是向下兼容的，即同一个字符在这些方案中总是有相同的编码，后面的标准支持更多的字符。在这些编码中，英文和中文可以统一地处理。区分中文编码的方法是高字节的最高位不为0。


## 编码详解

> unicode

"Universal Multiple-Octet Coded Character Set",简称为UCS。UCS可以看作是”Unicode Character Set”的缩写。ucs-2标识用2个字节标识一个字符。还有ucs-4版，用4个字节来标识。

> utf8/utf16

UCS规定了怎么用多个字节表示各种文字。怎样传输这些编码，是由UTF(UCS Transformation Format)规范规定的，常见的UTF规范包括UTF-8、UTF-7、UTF-16。

UTF-8最大的一个特点，就是它是一种变长的编码方式。它可以使用1~4个字节表示一个符号，根据不同的符号而变化字节长度。
UTF-8的编码规则很简单，只有二条：
1）对于单字节的符号，字节的第一位设为0，后面7位为这个符号的unicode码。因此对于英语字母，UTF-8编码和ASCII码是相同的。
2）对于n字节的符号（n>1），第一个字节的前n位都设为1，第n+1位设为0，后面字节的前两位一律设为10。剩下的没有提及的二进制位，全部为这个符号的unicode码。

Unicode符号范围 | UTF-8编码方式
(十六进制) | （二进制）
--------------------+---------------------------------------------
0000 0000-0000 007F | 0xxxxxxx
0000 0080-0000 07FF | 110xxxxx 10xxxxxx
0000 0800-0000 FFFF | 1110xxxx 10xxxxxx 10xxxxxx
0001 0000-0010 FFFF | 11110xxx 10xxxxxx 10xxxxxx 10xxxxxx

跟据上表，解读UTF-8编码非常简单。如果一个字节的第一位是0，则这个字节单独就是一个字符；如果第一位是1，则连续有多少个1，就表示当前字符占用多少个字节。
下面，还是以汉字"严"为例，演示如何实现UTF-8编码。
已知"严"的unicode是4E25（100111000100101），根据上表，可以发现4E25处在第三行的范围内（0000 0800-0000 FFFF），因此"严"的UTF-8编码需要三个字节，即格式是"1110xxxx 10xxxxxx 10xxxxxx"。然后，从"严"的最后一个二进制位开始，依次从后向前填入格式中的x，多出的位补0。这样就得到了，"严"的UTF-8编码是"11100100 10111000 10100101"，转换成十六进制就是E4B8A5。

### utf8和Unicode的区别

utf8是基于Unicode发展起来的。并没有改变编码，只是定义了一套存储方式. **是对Unicode的再编码**。
unicode规定了字符的唯一编码，但没有规定如何存储，utf8规定了如何存储,传输。
utf8是国际标准，支持世界上所有的语言，但是具体到某一个语言上，还是没有特定的字库支持好。

> 总结

utf8和gbk编码并不兼容，但他们都向下兼容ASCII编码。


## 参考

[3种中文编码的区别](http://www.zhihu.com/question/19677619)
[字符编码笔记](http://www.ruanyifeng.com/blog/2007/10/ascii_unicode_and_utf-8.html)
